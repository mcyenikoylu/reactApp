{"version":3,"file":"dx-core.umd.js","sources":["../src/utils.js","../src/plugin-host.js","../src/event-emitter.js","../src/shallow-equal.js","../src/memoize.js","../src/easings.js","../src/messages-formatter.js"],"sourcesContent":["const DELAY = 200;\n\nconst compare = (a, b) => {\n  const aPosition = a.position();\n  const bPosition = b.position();\n  for (let i = 0; i < Math.min(aPosition.length, bPosition.length); i += 1) {\n    if (aPosition[i] < bPosition[i]) return -1;\n    if (aPosition[i] > bPosition[i]) return 1;\n  }\n  return aPosition.length - bPosition.length;\n};\n\nexport const insertPlugin = (array, newItem) => {\n  const result = array.slice();\n  const nextItemIndex = array.findIndex(item => compare(newItem, item) <= 0);\n  const targetIndex = nextItemIndex < 0 ? array.length : nextItemIndex;\n  const alreadyExists = (targetIndex >= 0 && targetIndex < array.length)\n    && compare(newItem, array[targetIndex]) === 0;\n  result.splice(targetIndex, alreadyExists ? 1 : 0, newItem);\n  return result;\n};\n\nexport const createClickHandlers = (click, dblClick) => {\n  let timeoutId;\n  const events = {};\n  if (click) {\n    events.onClick = (e) => {\n      if (!timeoutId) {\n        timeoutId = setTimeout(() => {\n          clearTimeout(timeoutId);\n          click(e);\n        }, DELAY);\n      }\n    };\n  } if (dblClick) {\n    events.onDoubleClick = (e) => {\n      clearTimeout(timeoutId);\n      dblClick(e);\n    };\n  }\n  return events;\n};\n\n/* globals window:true */\nexport const isEdgeBrowser = () => /Edge/.test(window.navigator.userAgent);\n","import { insertPlugin } from './utils';\n\nconst getDependencyError = (pluginName, dependencyName) => new Error(`The '${pluginName}' plugin requires '${dependencyName}' to be defined before it.`);\n\nexport class PluginHost {\n  constructor() {\n    this.plugins = [];\n    this.subscriptions = new Set();\n    this.gettersCache = {};\n  }\n\n  ensureDependencies() {\n    const defined = new Set();\n    const knownOptionals = new Map();\n    this.plugins\n      .filter(plugin => plugin.container)\n      .forEach((plugin) => {\n        if (knownOptionals.has(plugin.name)) {\n          throw (getDependencyError(knownOptionals.get(plugin.name), plugin.name));\n        }\n\n        plugin.dependencies\n          .forEach((dependency) => {\n            if (defined.has(dependency.name)) return;\n            if (dependency.optional) {\n              if (!knownOptionals.has(dependency.name)) {\n                knownOptionals.set(dependency.name, plugin.name);\n              }\n              return;\n            }\n            throw (getDependencyError(plugin.name, dependency.name));\n          });\n\n        defined.add(plugin.name);\n      });\n  }\n\n  registerPlugin(plugin) {\n    this.plugins = insertPlugin(this.plugins, plugin);\n    this.cleanPluginsCache();\n  }\n\n  unregisterPlugin(plugin) {\n    this.plugins.splice(this.plugins.indexOf(plugin), 1);\n    this.cleanPluginsCache();\n  }\n\n  cleanPluginsCache() {\n    this.validationRequired = true;\n    this.gettersCache = {};\n    this.knownKeysCache = {};\n  }\n\n  knownKeys(postfix) {\n    if (!this.knownKeysCache[postfix]) {\n      this.knownKeysCache[postfix] = Array.from(this.plugins\n        .map(plugin => Object.keys(plugin))\n        .map(keys => keys.filter(key => key.endsWith(postfix))[0])\n        .filter(key => !!key)\n        .reduce((acc, key) => acc.add(key), new Set()))\n        .map(key => key.replace(postfix, ''));\n    }\n    return this.knownKeysCache[postfix];\n  }\n\n  collect(key, upTo) {\n    if (this.validationRequired) {\n      this.ensureDependencies();\n      this.validationRequired = false;\n    }\n\n    if (!this.gettersCache[key]) {\n      this.gettersCache[key] = this.plugins.map(plugin => plugin[key]).filter(plugin => !!plugin);\n    }\n    if (!upTo) return this.gettersCache[key];\n\n    const upToIndex = this.plugins.indexOf(upTo);\n    return this.gettersCache[key].filter((getter) => {\n      const pluginIndex = this.plugins.findIndex(plugin => plugin[key] === getter);\n      return pluginIndex < upToIndex;\n    });\n  }\n\n  get(key, upTo) {\n    const plugins = this.collect(key, upTo);\n\n    if (!plugins.length) return undefined;\n\n    let result = plugins[0]();\n    plugins.slice(1).forEach((plugin) => {\n      result = plugin(result);\n    });\n    return result;\n  }\n\n  registerSubscription(subscription) {\n    this.subscriptions.add(subscription);\n  }\n\n  unregisterSubscription(subscription) {\n    this.subscriptions.delete(subscription);\n  }\n\n  broadcast(event, message) {\n    this.subscriptions.forEach(subscription => subscription[event] && subscription[event](message));\n  }\n}\n","export class EventEmitter {\n  constructor() {\n    this.handlers = [];\n  }\n\n  emit(e) {\n    this.handlers.forEach(handler => handler(e));\n  }\n\n  subscribe(handler) {\n    this.handlers.push(handler);\n  }\n\n  unsubscribe(handler) {\n    this.handlers.splice(this.handlers.indexOf(handler), 1);\n  }\n}\n","export function shallowEqual(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  const hasOwn = Object.prototype.hasOwnProperty;\n  for (let i = 0; i < keysA.length; i += 1) {\n    if (!hasOwn.call(objB, keysA[i])\n        || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n\n    const valA = objA[keysA[i]];\n    const valB = objB[keysA[i]];\n\n    if (valA !== valB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function argumentsShallowEqual(prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  for (let i = 0; i < prev.length; i += 1) {\n    if (prev[i] !== next[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import { argumentsShallowEqual } from './shallow-equal';\n\nexport const memoize = (func) => {\n  let lastArgs = null;\n  let lastResult = null;\n  return (...args) => {\n    if (lastArgs === null || !argumentsShallowEqual(lastArgs, args)) {\n      lastResult = func(...args);\n    }\n    lastArgs = args;\n    return lastResult;\n  };\n};\n","export const easeInQuad = t => t * t;\nexport const easeOutQuad = t => t * (2 - t);\nexport const easeInOutQuad = t => (t < 0.5\n  ? 2 * t * t\n  : -1 + ((4 - (2 * t)) * t));\n\nexport const easeInCubic = t => t * t * t;\nexport const easeOutCubic = t => ((t - 1) * (t - 1) * (t - 1)) + 1;\nexport const easeInOutCubic = t => (t < 0.5\n  ? 4 * t * t * t\n  : ((t - 1) * ((2 * t) - 2) * ((2 * t) - 2)) + 1);\n\nexport const easeInQuart = t => t * t * t * t;\nexport const easeOutQuart = t => 1 - ((t - 1) * (t - 1) * (t - 1) * (t - 1));\nexport const easeInOutQuart = t => (t < 0.5\n  ? 8 * t * t * t * t\n  : 1 - (8 * (t - 1) * (t - 1) * (t - 1) * (t - 1)));\n\nexport const easeInQuint = t => t * t * t * t * t;\nexport const easeOutQuint = t => 1 + ((t - 1) * (t - 1) * (t - 1) * (t - 1) * (t - 1));\nexport const easeInOutQuint = t => (t < 0.5\n  ? 16 * t * t * t * t * t\n  : 1 + (16 * (t - 1) * (t - 1) * (t - 1) * (t - 1) * (t - 1)));\n","const processPattern = (pattern, params) => Object.keys(params).reduce(\n  (msg, key) => msg.replace(`{${key}}`, params[key]),\n  pattern,\n);\n\nexport const getMessagesFormatter = messages => (key, params) => {\n  const message = messages[key];\n\n  if (typeof message === 'function') {\n    return message(params);\n  }\n  if (params) {\n    return processPattern(message, params);\n  }\n  return message;\n};\n"],"names":["DELAY","compare","a","b","aPosition","position","bPosition","i","Math","min","length","insertPlugin","array","newItem","result","slice","nextItemIndex","findIndex","item","targetIndex","alreadyExists","splice","createClickHandlers","click","dblClick","timeoutId","events","onClick","e","setTimeout","clearTimeout","onDoubleClick","isEdgeBrowser","test","window","navigator","userAgent","getDependencyError","pluginName","dependencyName","Error","PluginHost","plugins","subscriptions","Set","gettersCache","defined","knownOptionals","Map","filter","plugin","container","forEach","has","name","get","dependencies","dependency","optional","set","add","cleanPluginsCache","indexOf","validationRequired","knownKeysCache","postfix","Array","from","map","Object","keys","key","endsWith","reduce","acc","replace","upTo","ensureDependencies","upToIndex","getter","pluginIndex","collect","undefined","subscription","delete","event","message","EventEmitter","handlers","handler","push","shallowEqual","objA","objB","keysA","keysB","hasOwn","prototype","hasOwnProperty","call","valA","valB","argumentsShallowEqual","prev","next","memoize","func","lastArgs","lastResult","args","easeInQuad","t","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","processPattern","pattern","params","msg","getMessagesFormatter","messages"],"mappings":"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"}